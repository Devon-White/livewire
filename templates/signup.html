<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sign Up</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <div class="container d-flex align-items-center justify-content-center" style="min-height: 90vh;">
      <div class="sw-glass p-5 rounded shadow-lg" style="max-width: 400px; width: 100%;">
        <div class="text-center mb-4">
          <span class="sw-logo" title="SignalWire Logo" aria-label="SignalWire Logo"></span>
          <h2 class="sw-gradient-text mt-3 mb-0">Sign Up</h2>
        </div>
        <div id="signupFormStep">
        {% if error %}
          <div class="alert alert-danger">{{ error }}</div>
        {% endif %}
        <form id="signupForm" method="post" autocomplete="off">
          <div class="mb-2 text small">Fields marked with <span class="text-danger">*</span> are required.</div>
          <div class="mb-3">
            <label class="form-label">First Name <span class="text-danger">*</span></label>
            <input type="text" name="first_name" class="form-control" required>
            <div class="invalid-feedback">First name is required.</div>
          </div>
          <div class="mb-3">
            <label class="form-label">Last Name <span class="text-danger">*</span></label>
            <input type="text" name="last_name" class="form-control" required>
            <div class="invalid-feedback">Last name is required.</div>
          </div>
          <div class="mb-3">
            <label class="form-label">Email <span class="text-danger">*</span></label>
            <input type="email" name="email" class="form-control" required>
            <div class="invalid-feedback">Email is required.</div>
          </div>
          <div class="mb-3">
            <label class="form-label">Password <span class="text-danger">*</span></label>
            <input type="password" name="password" id="password" class="form-control" required minlength="8" autocomplete="new-password">
            <div class="invalid-feedback" id="passwordLengthError">Password must be at least 8 characters.</div>
            <div class="invalid-feedback">Password is required.</div>
          </div>
          <div class="mb-3">
            <label class="form-label">Confirm Password <span class="text-danger">*</span></label>
            <input type="password" name="confirm_password" id="confirm_password" class="form-control" required autocomplete="new-password">
            <div class="invalid-feedback" id="passwordMatchError">Passwords do not match.</div>
            <div class="invalid-feedback">Confirm password is required.</div>
          </div>
          <div class="mb-3">
            <label class="form-label">Display Name</label>
            <input type="text" name="display_name" class="form-control">
          </div>
          <div class="mb-3">
            <label class="form-label">Job Title</label>
            <input type="text" name="job_title" class="form-control">
          </div>
          <div class="mb-3">
            <label class="form-label">Timezone</label>
            <input type="text" name="timezone" class="form-control">
          </div>
          <div class="mb-3">
            <label class="form-label">Country</label>
            <input type="text" name="country" class="form-control">
          </div>
          <div class="mb-3">
            <label class="form-label">Region</label>
            <input type="text" name="region" class="form-control">
          </div>
          <div class="mb-3">
            <label class="form-label">Company Name</label>
            <input type="text" name="company_name" class="form-control">
          </div>
          <button id="signupBtn" type="button" class="demo-button w-100 mt-3">Sign Up</button>
        </form>
        <p class="mt-3 text-center">Already have an account? <a href="/login" class="text-info">Login</a></p>
        </div>
      </div>
    </div>
    <!-- Confirmation Modal -->
    <div class="modal fade" id="confirmModal" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content bg-dark text-white border-0">
          <div class="modal-header border-0" style="background:rgba(12,19,57,0.95);">
            <h5 class="modal-title" id="confirmModalLabel">Confirm Subscription</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" style="background:rgba(12,19,57,0.85);">
            <b>Subscribers are $3/month.</b><br>
            To stop charges, you must delete the subscriber.
          </div>
          <div class="modal-footer border-0" style="background:rgba(12,19,57,0.95);">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button id="confirmSignupBtn" type="button" class="btn btn-primary" style="background:var(--sw-gradient); border:none;">Confirm & Sign Up</button>
          </div>
        </div>
      </div>
    </div>
    <script>
      document.getElementById('signupBtn').onclick = function(e) {
        e.preventDefault();
        // Validate required fields
        var valid = true;
        var requiredFields = [
          { id: 'first_name', name: 'First Name' },
          { id: 'last_name', name: 'Last Name' },
          { id: 'email', name: 'Email' },
          { id: 'password', name: 'Password' },
          { id: 'confirm_password', name: 'Confirm Password' }
        ];
        requiredFields.forEach(function(field) {
          var input = document.querySelector('[name="' + field.id + '"]');
          if (input && !input.value.trim()) {
            input.classList.add('is-invalid');
            valid = false;
          } else if (input) {
            input.classList.remove('is-invalid');
          }
        });
        // Validate password length
        var password = document.getElementById('password').value;
        if (password.length < 8) {
          document.getElementById('password').classList.add('is-invalid');
          document.getElementById('passwordLengthError').style.display = 'block';
          valid = false;
        } else {
          document.getElementById('password').classList.remove('is-invalid');
          document.getElementById('passwordLengthError').style.display = 'none';
        }
        // Validate password match
        var confirmPassword = document.getElementById('confirm_password').value;
        if (password !== confirmPassword) {
          document.getElementById('confirm_password').classList.add('is-invalid');
          document.getElementById('passwordMatchError').style.display = 'block';
          valid = false;
        } else {
          document.getElementById('confirm_password').classList.remove('is-invalid');
          document.getElementById('passwordMatchError').style.display = 'none';
        }
        if (valid) {
          var modal = new bootstrap.Modal(document.getElementById('confirmModal'));
          modal.show();
        }
      };
      document.getElementById('confirmSignupBtn').onclick = function() {
        document.getElementById('signupForm').submit();
      };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> 